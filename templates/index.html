<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì‹¤ì‹œê°„ ì œí’ˆ ë¶„ì„ê¸°</title>
    <style>
        body { font-family: 'Pretendard', sans-serif; background: #f0f4f8; padding: 20px; color: #333; }
        .container { max-width: 850px; margin: 0 auto; background: #fff; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .title { text-align: center; color: #1a73e8; }
        .input-group { display: flex; gap: 10px; margin: 30px 0; }
        input { flex: 1; padding: 15px; border: 2px solid #ddd; border-radius: 12px; font-size: 16px; }
        button { padding: 15px 30px; background: #1a73e8; color: #fff; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; }
        #status { font-size: 14px; color: #666; margin-bottom: 10px; font-style: italic; }
        #result { background: #fafafa; border: 1px solid #eee; padding: 25px; border-radius: 15px; white-space: pre-wrap; line-height: 1.8; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title"> ì‹¤ì‹œê°„ ì œí’ˆ ë¶„ì„ê¸°</h1>
        <div class="input-group">
            <input type="text" id="pName" placeholder="ë¶„ì„í•  ì œí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”...">
            <button onclick="runAnalysis()">ë¶„ì„ ì‹œì‘</button>
        </div>
        <div id="status"></div>
        <div id="result">ë¶„ì„ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
    </div>

    <script>
        async function runAnalysis() {
            const pName = document.getElementById('pName').value;
            const resultDiv = document.getElementById('result');
            const statusDiv = document.getElementById('status');

            if(!pName) return alert("ì œí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”.");

            statusDiv.innerText = "ğŸŒ ì›¹ì—ì„œ ë°ì´í„°ë¥¼ ê¸ì–´ì™€ì„œ íŒŒì´ì¬ì´ 1ì°¨ ê²€ìˆ˜ ì¤‘ì…ë‹ˆë‹¤...";
            resultDiv.innerText = "AIê°€ ìˆ˜ì§‘ëœ ì •ë³´ë¥¼ ë¶„ì„í•˜ì—¬ ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤.";

            const fd = new FormData();
            fd.append('user_input', pName);

            try {
                const res = await fetch('/chat', { method: 'POST', body: fd });
                const data = await res.json();
                
                if(data.answer) {
                    statusDiv.innerText = "âœ… " + data.data_info;
                    resultDiv.innerText = data.answer;
                } else {
                    resultDiv.innerText = "ì—ëŸ¬: " + data.error;
                }
            } catch(e) {
                resultDiv.innerText = "ì„œë²„ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
            }
        }
    </script>
</body>
</html>
